(()=>{function s(){scrollTop=window.pageYOffset||document.documentElement.scrollTop,scrollLeft=window.pageXOffset||document.documentElement.scrollLeft,window.onscroll=function(){window.scrollTo(scrollLeft,scrollTop)}}function t(){window.onscroll=function(){}}function a(s,t,a){var e=$("#url_action").html();$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({type:"post",url:e,data:{id_from:t,id_to:s,action:a},dataType:"json"}).done((function(s){s.success&&window.location.reload()}))}function e(s){var t=parseInt($("#id_from").html()),a=$(".box_chat").find(".chat_url").html();$.ajax({type:"post",url:a,data:{id_user:t,id_chat:s,limit:"25"},dataType:"json"}).done((function(s){if(s.messages){var a=s.messages.reverse(),e=$(".box_messages");e.html("");for(var i=0;i<a.length;i++){var n=a[i],c="";n.id_user==t&&(c="me"),e.append('\n                    <div class="box_message_single '.concat(c," ").concat(status,'">\n                        <p>').concat(n.message,"</p>\n                    </div>    \n                "))}}}))}function i(s,t,a,e,i){var n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";$.ajax({type:"post",url:s+"/settings",data:{newContent:t,oldContent:a,field:e,user_id:i},dataType:"json"}).done((function(s){s.success?""!=n&&(n.html(""),n.append("".concat(t," ").concat(o)),"Homem"!=t&&"Mulher"!=t||c(s.user)):(alert(s.message),""!=n&&(n.html(""),n.append("".concat(s.content," ").concat(o))))}))}function n(s){var t=$("#url_action").html();$.ajax({url:t+"/visible",type:"post",data:{id:s},dataType:"json"}).done((function(s){c(s)}))}function c(s){var t=$(".main .cards");s?t.html('\n        <div class="box_card">\n            <div class="card_content" style="background: rgba(0,0,0,0.1) url(\'http://localhost/Tinder-Clone/public/assets/app/images/'.concat(s.image,"')\">\n                <div>\n                    <h2>").concat(s.name," <span>").concat(s.age,"</span><p hidden id='id_to'>").concat(s.id,'</p></h2>\n                    <p><i class="fas fa-map-marker-alt"></i> a <span class=\'location\'></span> quilômetros daqui</p>\n                </div>            \n            </div>\n            <div class="icons">\n                <div class="circle deslike">\n                    <i class="fas fa-times"></i>\n                </div>\n                <div class="circle favorite">\n                    <i class="fas fa-star"></i>\n                </div>\n                <div class="circle like">\n                    <i class="fas fa-heart"></i>\n                </div>\n            </div>\n        </div>\n        ')):t.html("<h2 class='not_found'>Não há pessoas disponiveis!</h2>")}$(".enter").click((function(t){t.preventDefault(),$(".modal_login").css("display","flex"),$(".error").html(""),s()})),$(".register").click((function(t){t.preventDefault(),$(".modal_register").css("display","flex"),$(".error").html(""),s()})),$(".modal_register").click((function(){$(this).css("display","none"),t()})),$(".modal_login").click((function(){$(this).css("display","none"),t()})),$(".box_modal").click((function(s){s.stopPropagation(),t()})),$(".menu_btn").click((function(){$(".menu_mobile_box").animate({left:"0%"},200),s()})),$(".close_menu").click((function(){$(".menu_mobile_box").animate({left:"110%"},200),t()})),$(".box_modal .close").click((function(){$(".modal_register").css("display","none"),$(".modal_login").css("display","none")})),$(".modal_login_btn").click((function(){$(".modal_register").css("display","none"),$(".enter").click(),s()})),$(".modal_register_link").click((function(){$(".modal_login").css("display","none"),$(".register").click(),s()})),$(".drop_menu_link").mouseenter((function(){$(".drop_menu").css("display","block")})),$(".drop_menu").mouseenter((function(s){s.stopPropagation(),$(".drop_menu").css("display","block")})),$(".drop_menu").mouseleave((function(s){$(".drop_menu").css("display","none")})),$(".drop_menu_link").mouseleave((function(){$(".drop_menu").css("display","none")})),$(".drop_menu_link_mobile").click((function(){var s=$(this);$(this).hasClass("active")?(s.removeClass("active"),$(".fa-chevron-down").animate({deg:360},{duration:750,step:function(s){$(this).css({transform:"rotate("+s+"deg)",top:"15px",color:"rgb(216, 216, 216)"})}}),$(".drop_menu_mobile").css("display","none")):(s.addClass("active"),$(".fa-chevron-down").animate({deg:180},{duration:750,step:function(s){$(this).css({transform:"rotate("+s+"deg)",top:"14px",color:"#FD546C"})}}),$(".drop_menu_mobile").css("display","block"))})),$(window).scroll((function(){if($(".main").width()>896){var s=$(".main").height()-85;if($(window).scrollTop()>s)$(".nav").css("position","absolute").css("top","calc(100% - 85px)").css("padding-bottom","20px");else if($(".nav").css("position","fixed").css("top","0").css("padding-bottom","90px"),$(".text").css("opacity","1"),$(window).scrollTop()>50&&$(window).scrollTop()<400){var t=1-$(window).scrollTop()/400;$(".text").css("opacity",t)}else $(window).scrollTop()>370&&$(".text").css("opacity","0")}else $(".nav").css("position","static"),$(".text").css("opacity","1")})),$(window).resize((function(){$(".main").width()<896&&($(".nav").css("position","static"),$(".text").css("opacity","1"))})),$(".matches_btn").click((function(){$(this).css("border-bottom","3.5px solid #FD546C"),$(this).addClass("actived"),$(".messages_btn").removeClass("actived"),$(".messages_btn").css("border-bottom","none"),$(".matches").animate({right:"0"},300),$(".messages").animate({right:"-2%"},300),$(".matches div").children(".icon").children("svg").first().addClass("first_card"),$(".messages").find("#svg_23").removeClass("chat_1"),$(".messages").find("#svg_33").removeClass("chat_2"),$(".box_chat_single").hasClass("actived")&&$(".box_chat_single").click()})),$(".messages_btn").click((function(){$(this).css("border-bottom","3.5px solid #FD546C"),$(this).addClass("actived"),$(".matches_btn").removeClass("actived"),$(".matches_btn").css("border-bottom","none"),$(".matches").animate({right:"52%"},300),$(".messages").animate({right:"50%"},300),$(".first_card").removeClass("first_card"),setTimeout((function(){$(".messages").find("#svg_23").addClass("chat_1"),setTimeout((function(){$(".messages").find("#svg_33").addClass("chat_2")}),1e3)}),300)})),$(".title .img, .title > i").click((function(){$(".title .img").hasClass("actived")?($(".title .img").removeClass("actived"),$(".title > i").css("display","none"),$(".matches").css("left: 0;"),$(".messages_btn").hasClass("actived")&&$(".matches").animate({right:"50%"}),$(".settings").animate({left:"-375"}),$(".chat").animate({left:"20"}),$(".settings_user").css("display","none"),$(".main_user").css("display","block")):($(".title .img").addClass("actived"),$(".title > i").css("display","block"),$(".messages_btn").hasClass("actived")&&$(".matches").animate({right:"100%"}),$(".settings").animate({left:"0"}),$(".chat").animate({left:"400"}),$(".settings_user").css("display","block"),$(".main_user").css("display","none"))})),$(".circle.like").click((function(){var s=$("#id_from").html();a($("#id_to").html(),s,"1")})),$(".circle.deslike").click((function(){var s=$("#id_from").html();a($("#id_to").html(),s,"0")})),$(".box_chat_single").click((function(){var s=$(this).attr("id"),t=$(this),a=$(".main .chat"),i=$(".main .cards");if(t.hasClass("actived"))t.removeClass("actived"),a.css("display","none"),i.css("display","block");else{$(".box_chat_single").removeClass("actived"),t.addClass("actived"),a.css("display","flex"),i.css("display","none");var n=parseInt($("#id_from").html()),c=$(".box_chat").find(".chat_url").html();$.ajax({type:"post",url:c,data:{id_user:n,id_chat:s,limit:"25"},dataType:"json"}).done((function(s){$(".box_chat").find(".user_info").html('\n                <div>\n                    <div class=\'chat_btn\'><i class="fas fa-chevron-left"></i></div>\n                    <div class="img">\n                        <img src="http://127.0.0.1:8000/assets/app/images/'.concat(s.user.image,'" alt="">\n                    </div>\n                    <h2>').concat(s.user.name,"</h2>\n                </div>\n                <div class='user_info_btn'>\n                    <i class=\"fas fa-ellipsis-v\"></i>\n                </div>\n            ")),$(".chat .box_user .user_info").html('\n                <div class="img">\n                    <img src="http://127.0.0.1:8000/assets/app/images/'.concat(s.user.image,'" alt="">\n                </div>\n                <div class="info">\n                    <h2><span>').concat(s.user.name,"</span></h2>\n                    <p><i class=\"fas fa-map-marker-alt\"></i> a <span>60</span> quilômetros daqui</p>\n                    <p hidden class='user_id'>").concat(s.user.id,"</p>\n                </div> \n            ")),$(".chat_btn").on("click",(function(){$(".box_chat_single").click()})),$(".user_info .user_info_btn").on("click",(function(){$(".box_user").animate({right:0})}))})),e(s)}})),$(".unmatch").click((function(){var s=parseInt($(".box_user .user_info .user_id").html()),t=parseInt($("#id_from").html());$.ajax({type:"post",url:$(this).attr("url"),data:{id_from:t,id_to:s,action:"unmatch"},dataType:"json"}).done((function(s){console.log(s),s.success&&window.location.reload()}))})),$(".sendMessage").click((function(){if($("#message").val().length>0){var s=$(".box_chat_single.actived").attr("id"),t=parseInt($("#id_from").html()),a=$("#message").val(),e=$("#sendMessage").html();""!=a&&$.ajax({type:"post",url:e,data:{id_chat:s,id_user:t,message:a},dataType:"json"}).done((function(s){if(s.success){var t=$(".box_messages");$("#message").val(""),t.append('\n                        <div class="box_message_single me">\n                            <p>'.concat(a,"</p>\n                        </div>\n                    ")),$(".box_messages").scrollTop($(".box_messages")[0].scrollHeight),$("button.sendMessage").css("background","#d5d5d5").css("cursor","default")}}))}else $(this).css("cursor","default")})),$("#message").keyup((function(s){13===s.keyCode&&$(".sendMessage").click()})),$("#message").keyup((function(){var s=$("button.sendMessage");$(this).val().length>0?s.css("background","gray").css("cursor","pointer"):s.css("background","#d5d5d5").css("cursor","default")})),$("#message").blur((function(){0===$(this).val().length&&$("button.sendMessage").css("background","#d5d5d5")})),setInterval((function(){$(".box_chat_single").hasClass("actived")&&e($(".box_chat_single.actived").attr("id"))}),1e3),$(".settings button span").click((function(){var s=$(this).closest("button").attr("class"),t=$(this).html().split('<i class="fas fa-chevron-right"></i>')[0].trim(),a='<i class="fas fa-chevron-right"></i>',e=$("#id_from").html(),c=$("#url_action").html();if(!$(this).hasClass("actived")){$(this).addClass("actived"),$(this).html("");var o=$(this);if("email"==s||"phone"==s)$(this).append("<input type='text' placeholder='".concat(t,"'> ").concat(a)),$("button.phone input").mask("(00) 00000-0000"),$(this).find("input").focus(),$(this).find("input").focusout((function(){var n=$(this).val();o.removeClass("actived"),""==n?(o.html(""),o.append("".concat(t," ").concat(a))):i(c,n,t,s,e,o,a)}));else if("sex"==s||"sexual_affinity"==s){var l="",d="";"Mulher"==t&&(d="selected"),"Homem"==t&&(l="selected"),$(this).append('  \n            <select name="sex" class=\'sex\'>\n                <option value="Homem" '.concat(l,'>Homem</option>\n                <option value="Mulher" ').concat(d,">Mulher</option>\n            </select> ").concat(a,"\n            ")),$(this).find("i").animate({deg:90},{duration:300,step:function(s){$(this).css({transform:"rotate("+s+"deg)",top:"15px",color:"#FD546C"})}}),$(this).find("select").focusout((function(){var e=$(this).val();if(o.removeClass("actived"),e==t)o.html(""),o.append("".concat(t," ").concat(a));else{var l=$("#id_from").html();i(c,e,t,s,l,o,a),n(l)}}))}}})),$("button.visible .button").click((function(){var s=$(this),t=$("#id_from").html(),a=$("#url_action").html();$(this).hasClass("actived")?(s.find("p").animate({left:"0"},200),s.find("p").css("background","rgb(194, 194, 194)"),s.removeClass("actived"),i(a,"0","1","visible",t),$(".main_user .box_card ").css("display","none"),$(".cards").append("<h2 class='not_found'>Abilite para que outras pessoas possam te ver primeiro!</h2>")):(s.find("p").animate({left:"26"},200),s.find("p").css("background","#FD546C"),s.addClass("actived"),i(a,"1","0","visible",t),$(".box_card .users").css("display","block"),$(".not_found").remove(),n(t))})),$(".settings_user .card_content").on("click",(function(){$("#input_file").trigger("click")})),$("#input_file").on("change",(function(s){$(this)[0].files[0]&&$("form input[type=submit]").click()})),$(".icons form").on("submit",(function(s){s.preventDefault();var t=$("#url_action").html()+"/image",a=new FormData(this);$.ajax({url:t,type:"POST",data:a,dataType:"json",cache:!1,contentType:!1,processData:!1}).done((function(s){if(s.success){var t=s.name;$(".title").find(".img").html('<img src="http://localhost/Tinder-Clone/public/assets/app/images/'.concat(t,'" alt="user_image"></img>')),$(".settings_user .card_content").css("background","rgba(0,0,0,0.1) url('http://localhost/Tinder-Clone/public/assets/app/images/"+t+"')")}else alert(s.message)}))})),$(".menu_btn_mobile").click((function(s){s.stopPropagation(),$(".aside").hasClass("active")?($(".aside").removeClass("active"),$(".aside").animate({left:-375})):($(".aside").addClass("active"),$(".aside").animate({left:0}))})),$(".main").click((function(){$(".aside").hasClass("active")&&($(".aside").removeClass("active"),$(".aside").animate({left:-375}))})),$(".box_user .user_info_btn").on("click",(function(){$(".box_user").animate({right:-900})}))})();